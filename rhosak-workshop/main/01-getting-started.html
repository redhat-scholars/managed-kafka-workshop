<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Getting Started with OpenShift Streams for Apache Kafka :: Red Hat OpenShift Streams for Apache Kafka Workshop</title>
    <link rel="canonical" href="https://redhat-scholars.github.io/rhosak-workshop/rhosak-workshop/main/01-getting-started.html">
    <link rel="prev" href="index.html">
    <link rel="next" href="02-using-kcat.html">
    <meta name="generator" content="Antora 2.3.4">
    <link rel="stylesheet" href="../../_/css/site.css">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://developers.redhat.com" target="_blank"><img src="../../_/img/NewRHDFullLogo_4-color_white-wordmark.png" height="40px" alt="Red Hat Developer Program"></a>
      <a class="navbar-item" style="font-size: 24px; color: white" href="https://redhat-scholars.github.io/rhosak-workshop">Red Hat OpenShift Streams for Apache Kafka Workshop</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://developers.redhat.com/ebooks/" target="_blank">Books</a>
        <a class="navbar-item" href="https://developers.redhat.com/cheatsheets/" target="_blank">Cheat Sheets</a>
        <a class="navbar-item" href="https://developers.redhat.com/events/" target="_blank">Upcoming Events</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">More Tutorials</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/kubernetes-tutorial/" target="_blank">Kubernetes</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/istio-tutorial/" target="_blank">Istio</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/quarkus-tutorial/" target="_blank">Quarkus</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/knative-tutorial/" target="_blank">Knative</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/tekton-tutorial/" target="_blank">Tekton</a>
          </div>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="rhosak-workshop" data-version="main">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="index.html"></a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item is-current-page" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="01-getting-started.html">1. Getting Started with OpenShift Streams for Apache Kafka</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#redhataccount">Create a Red Hat Account</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#kafka">Provision a Kafka instance</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#serviceaccount">Create a Service Account</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#serviceaccountpermissions">Set Permissions for a Service Account</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#topic">Create a Kafka Topic</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="02-using-kcat.html">2. Using kcat with Kafka instances in OpenShift Streams for Apache Kafka</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="02-using-kcat.html#devsandboxaccess">Get access to the Developer Sandbox</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="02-using-kcat.html#toolsimage">Install the tools image on Developer Sandbox</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="02-using-kcat.html#kcatconnect">Configuring kcat to connect to a Kafka instance</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="02-using-kcat.html#kcatproduce">Producing messages in kcat</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="02-using-kcat.html#kcatconsume">Consuming messages in kcat</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="03-connect-streams-apache-kafka.html">3. Connecting OpenShift Streams for Apache Kafka</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="03-connect-streams-apache-kafka.html#toolsimage">Install the tools image on Developer Sandbox</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="03-connect-streams-apache-kafka.html#connectopenshiftstreams">Connect the OpenShift Streams for Apache Kafka instance to your OpenShift project</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="03-connect-streams-apache-kafka.html#inspectkafkadetails">Inspect the Kafka connection details</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="04-bind-quarkus-application.html">4. Binding a Quarkus application to OpenShift Streams for Apache Kafka</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="04-bind-quarkus-application.html#deployquarkusapplication">Deploying a Quarkus application</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="04-bind-quarkus-application.html#createkafkatopic">Creating a Kafka topic for your Quarkus application</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="04-bind-quarkus-application.html#toolsimage">Install the tools image on Developer Sandbox</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="04-bind-quarkus-application.html#bindquarkusapp">Binding your Quarkus application to Streams for Apache Kafka</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="index.html">Red Hat OpenShift Streams for Apache Kafka Workshop</a></li>
    <li><a href="01-getting-started.html">1. Getting Started with OpenShift Streams for Apache Kafka</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/redhat-scholars/rhosak-workshop/edit/main/documentation/modules/ROOT/pages/01-getting-started.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<article class="doc">
<h1 class="page">Getting Started with OpenShift Streams for Apache Kafka</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>As a developer of applications and services, you can use OpenShift Streams for Apache Kafka to create and set up Kafka instances and connect your applications and services to these instances. Streams for Apache Kafka is a managed cloud service that enables you to add Kafka data-streaming functionality in your applications without having to install, configure, run, and maintain your own Kafka clusters.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="redhataccount"><a class="anchor" href="#redhataccount"></a>Create a Red Hat account</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You need a Red Hat account to provision a managed Kafka instance. If you don’t have a Red Hat account, this is how you can create one:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Go to <a href="https://console.redhat.com">console.redhat.com</a>.</p>
</li>
<li>
<p>Click the <strong>Register for a Red Hat account</strong> link to create a Red Hat account.</p>
<div class="imageblock">
<div class="content">
<img src="_images/register-redhat-account.png" alt="register redhat account" width="60%">
</div>
</div>
<div class="paragraph">
<p>Be sure to select a <strong>Personal account</strong> type.</p>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="kafka"><a class="anchor" href="#kafka"></a>Provision a Kafka instance in OpenShift Streams for Apache Kafka</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Go to <a href="https://console.redhat.com">console.redhat.com</a> and log in with your Red Hat account.</p>
</li>
<li>
<p>On the <a href="https://console.redhat.com">console.redhat.com</a> landing page, select <strong>Application Services</strong> from the menu on the left.</p>
</li>
<li>
<p>On the Application Services landing page, select <strong>Streams for Apache Kafka → Kafka Instances</strong>.</p>
<div class="imageblock">
<div class="content">
<img src="_images/rhosak-kafka-instances.png" alt="rhosak kafka instances">
</div>
</div>
</li>
<li>
<p>On the Kafka Instances overview page, click the <strong>Create Kafka</strong> instance button. Enter a unique name and select the relevant <em>Cloud region</em> for your Kafka instance and click <strong>Create instance</strong>. This starts the provisioning process for your Kafka instance.</p>
</li>
<li>
<p>The new Kafka instance is listed in the instances table. After a couple of minutes, your instance should be marked as ready.</p>
<div class="imageblock">
<div class="content">
<img src="_images/rhosak-kafka-instance-ready.png" alt="rhosak kafka instance ready">
</div>
</div>
</li>
<li>
<p>When the instance <em>Status</em> is <em>Ready</em>, you can start using the Kafka instance. You can use the options icon (three vertical dots) to view, connect to, or delete the instance as needed.</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Although you can see Kafka instances created by other users in your organization, you can&#8217;t manage those instances. Only the user who creates an instance can edit or delete the instance, setup permissions and create or delete topics.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="serviceaccount"><a class="anchor" href="#serviceaccount"></a>Create a Service Account to connect to a Kafka instance</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To connect your applications or services to a Streams for Apache Kafka instance, you need to create a service account.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>On the <strong>Kafka Instances</strong> overview page, select the <strong>Options</strong> icon (the three dots) for the Kafka instance you just created. Select <strong>View connection information</strong>.</p>
</li>
<li>
<p>Copy the <strong>Bootstrap server</strong> endpoint to a secure location. You will need this when connecting to your Kafka instance.</p>
</li>
<li>
<p>Click <strong>Create service account</strong> to set up the service account. Enter a unique service account name and an optional description, and click <strong>Create</strong>.</p>
</li>
<li>
<p>Copy the generated <strong>Client ID</strong> and <strong>Client Secret</strong> to a secure location. These are the credentials that you’ll use to connect to this Kafka instance.</p>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The generated credentials are displayed only one time, so ensure that you’ve successfully and securely saved the copied credentials before closing the credentials window.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>After saving the generated credentials, select the confirmation check box and close the Credentials window.</p>
<div class="imageblock">
<div class="content">
<img src="_images/rhosak-service-account.png" alt="rhosak service account">
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>You’ll use the service account information that you saved to configure your application to connect to your Kafka instances when you’re ready. For example, if you plan to use <a href="https://github.com/edenhill/kcat">kcat</a> to interact with your Kafka instance, you’ll use this information to set your bootstrap server and client environment variables.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="serviceaccountpermissions"><a class="anchor" href="#serviceaccountpermissions"></a>Set Permissions for a Service Account</h2>
<div class="sectionbody">
<div class="paragraph">
<p>After you create a service account to connect to a Kafka instance, you must also set the appropriate level of access for that new account in the Access Control List (ACL) of the Kafka instance. Streams for Apache Kafka uses ACLs provided by Kafka that enable you to manage how other user accounts and service accounts are permitted to interact with the Kafka resources that you create.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>On the <strong>Kafka Instances</strong> page, click the name of the Kafka instance you previously created.</p>
</li>
<li>
<p>Click the <strong>Access</strong> tab to view the current ACL for this instance.</p>
<div class="imageblock">
<div class="content">
<img src="_images/rhosak-default-access.png" alt="rhosak default access">
</div>
</div>
</li>
<li>
<p>Click <strong>Manage access</strong>, use the <strong>Account</strong> drop-down menu to select the service account that you previously created, and click <strong>Next</strong>.</p>
</li>
<li>
<p>Under <strong>Assign Permissions</strong>, use the drop-down menus to set the permissions shown in the following table for this service account. Click <strong>Add</strong> to add each new resource permission.</p>
<div class="paragraph">
<p>These permissions enable applications associated with the service account to create and delete topics in the instance, to produce and consume messages in any topic in the instance, and to use any consumer group and any producer.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Example ACL permissions for a new service account</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Resource type</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">Resource identifier and value</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">Access type</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">Operation</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Topic</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Is</code> = <code>*</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Allow</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>All</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Consumer group</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Is</code> = <code>*</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Allow</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Read</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Transactional ID</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Is</code> = <code>*</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Allow</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>All</code></p></td>
</tr>
</tbody>
</table>
<div class="imageblock">
<div class="content">
<img src="_images/rhosak-access-serviceaccount.png" alt="rhosak access serviceaccount">
</div>
</div>
</li>
<li>
<p>After you add these permissions for the service account, click <strong>Save</strong> to finish.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="topic"><a class="anchor" href="#topic"></a>Create a Kafka Topic in OpenShift Streams for Apache Kafka</h2>
<div class="sectionbody">
<div class="paragraph">
<p>After you create a Kafka instance, you can create Kafka topics to start producing and consuming messages in your services.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In the <strong>Kafka Instances</strong> page of the web console, click the name of the Kafka instance that you want to add a topic to.</p>
</li>
<li>
<p>Select the <strong>Topics</strong> tab, click <strong>Create topic</strong>, and follow the guided steps to define the topic details. Click <strong>Next</strong> to complete each step and click <strong>Finish</strong> to complete the setup.</p>
<div class="paragraph">
<p><span class="image"><img src="_images/rhosak-create-topic.png" alt="rhosak create topic"></span></p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Topic name</strong>: Enter a unique topic name, such as <code>my-first-kafka-topic</code>.</p>
</li>
<li>
<p><strong>Partitions</strong>: Set the number of partitions for this topic. This example sets the partition to 1 for a single partition. Partitions are distinct lists of messages within a topic and enable parts of a topic to be distributed over multiple brokers in the cluster. A topic can contain one or more partitions, enabling producer and consumer loads to be scaled.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You can increase the number of partitions later, but you cannot decrease them.
</td>
</tr>
</table>
</div>
</li>
<li>
<p><strong>Message retention</strong>: Set the message retention time and size to the relevant value and increment. The default retention time is set to <code>A week</code> and the retention size to <code>Unlimited</code>. Message retention time is the amount of time that messages are retained in a topic before they are deleted or compacted, depending on the cleanup policy. Retention size is the maximum total size of all log segments in a partition before they are deleted or compacted.</p>
</li>
<li>
<p><strong>Replicas</strong>: For this release of Streams for Apache Kafka, the replicas are preconfigured. The number of partition replicas for the topic is set to <code>3</code> and the minimum number of follower replicas that must be in sync with a partition leader is set to <code>2</code>. Replicas are copies of partitions in a topic. Partition replicas are distributed over multiple brokers in the cluster to ensure topic availability if a broker fails. When a follower replica is in sync with a partition leader, the follower replica can become the new partition leader if needed.</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>After you complete the topic setup, the new Kafka topic is listed in the topics table. You can now start producing and consuming messages to and from this topic using services that you connect to this instance.</p>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="index.html">Red Hat OpenShift Streams for Apache Kafka Workshop</a></span>
  <span class="next"><a href="02-using-kcat.html">2. Using kcat with Kafka instances in OpenShift Streams for Apache Kafka</a></span>
</nav>
</article>
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
  </div>
</main>
</div>
<footer class="footer">
  <a class="rhd-logo" href="https://developers.redhat.com" target="_blank"></div>
</footer>
<script src="../../_/js/vendor/clipboard.js"></script>
<script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
  </body>
</html>
